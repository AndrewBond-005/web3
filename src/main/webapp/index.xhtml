<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ace="http://www.icefaces.org/icefaces/components">

<h:head>
    <title>WEB3</title>
    <link rel="icon" type="image/png" href="#{request.contextPath}\favicon.png" />
    <h:outputStylesheet library="css" name="styles.css"/>
</h:head>
<h:body>
    <!--
    <div>
        <h:outputText id="currentTime" value="–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è: #{timeBean.currentTime}" prependId="false"/>
        <ace:poll interval="11000" render="currentTime" />
    </div>
-->
    <h:form id="hiddenForm" prependId="false">
        <h:inputHidden id="clickX" value="#{resultsManager.x}" />
        <h:inputHidden id="clickY" value="#{resultsManager.y}" />
        <h:inputHidden id="clickR" value="#{resultsManager.r}" />
        <h:outputText id="pointData"
        value='{"x":#{resultsManager.x}, "y":#{resultsManager.y}, "r":#{resultsManager.r},"hit":#{resultsManager.hit}}'/>

        <h:commandButton id="submitClick"
                         action="#{resultsManager.submitHit}"
                         style="display:none">
            <f:ajax execute="@form" render=":resultTable :message :pointData"/>
        </h:commandButton>
    </h:form>

    <table id="main">
        <caption><h1>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ3 –ø–æ –≤–µ–±-–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é</h1></caption>
        <colgroup>
            <col id="col1"/>
            <col id="col2"/>
            <col id="col3"/>
        </colgroup>
        <thead>
        <tr>
            <th colspan="3">
                <header>–í—ã–ø–æ–ª–Ω–∏–ª: –ë–æ–Ω–¥–∞—Ä–µ–Ω–∫–æ –ê–Ω–¥—Ä–µ–π –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–∏—á P3215 –í–∞—Ä–∏–∞–Ω—Ç: 26705</header>
                <button id="themeTag">üåô</button>
            </th>
        </tr>
        </thead>

        <tr>
            <td id="inputcell">
                <h:form id="controlForm" prependId="false">
                <h:inputHidden binding="#{viewScope.hidden}" />
                <div class="form-group">
                        <h:outputLabel for="xSlider" value="X:" />
                        <ace:sliderEntry id="xSlider"
                                         value="#{resultsManager.x}"
                                         min="-2" max="2" step="1"
                                         animate="true" />
                    </div>

                <div class="form-group">
                    <h:outputLabel for="yInput" value="Y:" />
                    <h:inputText id="yInput"
                                 value="#{resultsManager.y}"
                                 size="7"
                                 validatorMessage="Y –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å–ª–æ–º –æ—Ç -5 –¥–æ 3">
                        <f:validateDoubleRange minimum="-5.0" maximum="3.0" />
                    </h:inputText>
                </div>

                <div class="form-group">
                    <h:outputLabel value="R:" />
                    <h:selectOneRadio id="rRadio" value="#{resultsManager.r}">
                        <f:selectItem itemValue="1" itemLabel="1" />
                        <f:selectItem itemValue="2" itemLabel="2" />
                        <f:selectItem itemValue="3" itemLabel="3" />
                        <f:selectItem itemValue="4" itemLabel="4" />
                        <f:selectItem itemValue="5" itemLabel="5" />
                    </h:selectOneRadio>
                </div>

                    <div class="form-group">
                        <h:commandButton id="submitButton" value="–û—Ç–ø—Ä–∞–≤–∏—Ç—å"
                                         action="#{resultsManager.checkHitWithValidation}">
                            <f:ajax execute="@form" render=" :resultTable :errormessage" />
                        </h:commandButton>
                    </div>

                    <div class="form-group">
                        <h:commandButton id="clearButton" value="–û—á–∏—Å—Ç–∏—Ç—å"
                                         action="#{resultsManager.clearResults}">
                            <f:ajax render=":resultTable :errormessage :pointData" onevent="handleAjax" />
                        </h:commandButton>
                    </div>

                    <h:panelGroup id="errorMessage">
                        <h:outputText value="#{resultsManager.message}"
                                      rendered="#{not empty resultsManager.message}"
                                      style="color: red;" />
                    </h:panelGroup>
                </h:form>
            </td>

            <td id="areacell">
                <div id="canvasWrapper">
                    <canvas id="canvas" width="333" height="333"></canvas>
                </div>
            </td>

            <td>
                <h:form id="resultsForm" prependId="false">
                    <ace:dataTable id="resultTable"
                                   value="#{resultsManager.results}"
                                   var="result">
                        <ace:column headerText="X">
                            <h:outputText value="#{result.x}" />
                        </ace:column>
                        <ace:column headerText="Y">
                            <h:outputText value="#{result.y}" />
                        </ace:column>
                        <ace:column headerText="R">
                            <h:outputText value="#{result.r}" />
                        </ace:column>
                        <ace:column headerText="–†–µ–∑—É–ª—å—Ç–∞—Ç">
                            <h:outputText value="#{result.hit ? '–ø–æ–ø–∞–ª' : '–Ω–µ –ø–æ–ø–∞–ª'}"
                                          styleClass="#{result.hit ? 'hit' : 'miss'}" />
                        </ace:column>
                        <ace:column headerText="–í—Ä–µ–º—è">
                            <h:outputText value="#{result.timestamp}">
                                <f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss" />
                            </h:outputText>
                        </ace:column>
                        <ace:column headerText="–º—Å">
                            <h:outputText value="#{result.executionTime}" />
                        </ace:column>
                    </ace:dataTable>
                </h:form>
            </td>
        </tr>

        <tfoot>
        <tr>
            <td colspan="3" style="text-align: center;">
                <h:button value="–ù–∞ –≥–ª–∞–≤–Ω—É—é" outcome="main" />
            </td>
        </tr>
        </tfoot>
    </table>
    <script type="module" src="#{request.contextPath}/resources/js/main.js"></script>
</h:body>
</html>